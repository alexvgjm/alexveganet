import{s as fe}from"../chunks/BQ15y-oL.js";import"../chunks/CWj6FrbW.js";import{o as Ce}from"../chunks/DXvr5MkK.js";import{p as oe,aI as Oe,aJ as Te,f as O,t as S,b as k,c as ie,aq as je,d as t,r as a,h as e,M as D,m as f,s,A as Pe,k as Je,aX as Ke,o as be,i as ye,aY as Ve,af as re,n as we,e as Xe,a as Ye}from"../chunks/Dklkudmk.js";import{s as m}from"../chunks/CPg8peRc.js";import{i as $}from"../chunks/_anfbMuE.js";import{e as Qe,i as Ze}from"../chunks/j2RxxnUs.js";import{h as xe}from"../chunks/CjFALAzN.js";import{s as et}from"../chunks/bWBFZa-U.js";import{s as H}from"../chunks/j1b29jXt.js";import{e as se,d as tt}from"../chunks/CbR4jyub.js";import{a as at,s as st}from"../chunks/BNMlDoAB.js";import"../chunks/69_IOA4Y.js";import{i as Ie}from"../chunks/Dv4WNOD4.js";import{p as I}from"../chunks/CmBYzWmm.js";import{r as ne}from"../chunks/BI7sRbXH.js";import{p as ot}from"../chunks/CZLTFTQ2.js";import{s as it}from"../chunks/CIeRTlPl.js";import{b as rt}from"../chunks/CWoHNtTF.js";import{H as ke}from"../chunks/rBwrARmC.js";const nt=""+new URL("../assets/calavera.DoKPg9LM.png",import.meta.url).href,lt=async()=>{let p={};const o="How many deaths by code",d="How simple coding mistakes can lead to fatal outcomes";p={keywords:["code","programming","smells","test","tdd","deaths"],description:d,canonical:`${fe}/avoidable-deaths-by-code`,title:o,openGraph:{description:d,title:o},twitter:{description:d,title:o}};const _=fe+nt;return p.openGraph.images=[{url:_,width:200,height:200}],p.twitter.image=_,{pageMetaTags:p}},Wt=Object.freeze(Object.defineProperty({__proto__:null,load:lt},Symbol.toStringTag,{value:"Module"}));var ct=O("<span> </span>");function j(p,o){oe(o,!1);let d=I(o,"targetNumber",8),_=I(o,"duration",8,2e3),v=D(0);function y(u){return 1-Math.pow(1-u,2.5)}function w(){const u=performance.now();function r(E){const L=E-u;let g=Math.min(L/_(),1);g=y(g),f(v,Math.floor(d()*g)),g<1&&requestAnimationFrame(r)}requestAnimationFrame(r)}Ce(w),Oe(()=>je(d()),()=>{d(),w()}),Te(),Ie();var b=ct(),i=t(b,!0);a(b),S(()=>m(i,e(v))),k(p,b),ie()}var dt=O('<div class="code-wrapper__lang svelte-fcvtd2"> </div>'),ut=O('<button class="code-wrapper__button svelte-fcvtd2"> </button>'),ht=O('<button class="code-wrapper__button svelte-fcvtd2"> </button>'),pt=O('<div><!> <div class="code-wrapper__buttons svelte-fcvtd2"><!> <!></div> <pre class="svelte-fcvtd2"><code> </code></pre></div>');function vt(p,o){oe(o,!1);let d=I(o,"language",8),_=I(o,"showLineWrapButton",8,!1),v=I(o,"showLanguage",8,!0),y=I(o,"showCopyButton",8,!1),w=I(o,"content",8);const b={CSS:"#2965f1",HTML:"#e34c26",TypeScript:"#3178c6",JavaScript:"#f1dd35"};let i=D(!1),u=D(),r=D("üìÉ Copiar"),E=-1;function L(){navigator.clipboard.writeText(e(u).textContent),f(r,"¬°Copiado!"),clearTimeout(E),E=setTimeout(()=>f(r,"üìÉ Copiar"),2e3)}Oe(()=>(je(w()),e(u),ke),()=>{w(),e(u)&&(e(u).removeAttribute("data-highlighted"),ke.highlightAll())}),Te(),Ie();var g=pt();let A;var B=t(g);{var M=c=>{var n=dt(),T=t(n,!0);a(n),S(()=>m(T,d())),k(c,n)};$(B,c=>{v()&&c(M)})}var U=s(B,2),q=t(U);{var R=c=>{var n=ut(),T=t(n);a(n),S(()=>m(T,`Text wrap: ${e(i)?"on":"off"}`)),se("click",n,()=>{f(i,!e(i))}),k(c,n)};$(q,c=>{_()&&c(R)})}var F=s(q,2);{var W=c=>{var n=ht(),T=t(n,!0);a(n),S(()=>m(T,e(r))),se("click",n,L),k(c,n)};$(F,c=>{y()&&c(W)})}a(U);var N=s(U,2),C=t(N),z=t(C,!0);a(C),rt(C,c=>f(u,c),()=>e(u)),a(N),a(g),S((c,n)=>{A=H(g,1,"code-wrapper svelte-fcvtd2",null,A,c),it(g,`--lang-color: ${(v()?b[d()]:"transparent")??""}`),H(C,1,n,"svelte-fcvtd2"),m(z,w())},[()=>({"code-wrapper__line-wrap":e(i)}),()=>`language-${d().toLowerCase()}`],Pe),k(p,g),ie()}async function mt(p,o,d,_,v){f(o,(e(o)+1)%d.length),await re(),ne(_().url.pathname+`#${e(v).id}`,{})}async function gt(p,o,d,_,v){Ve(o,-1),e(o)==-1&&f(o,d.length-1),await re(),ne(_().url.pathname+`#${e(v).id}`,{})}var _t=(p,o)=>o("es"),ft=(p,o)=>o("en"),bt=(p,o)=>e(o).revealed=!0,yt=O("<button> </button>"),wt=O('<li class="solutions__solution svelte-1itho5s"><!>.</li>'),xt=O('<section class="how-many-deaths svelte-1itho5s"><div class="lang-selector svelte-1itho5s"><button>Espa√±ol</button> <button>English</button></div> <i class="emoji-logo svelte-1itho5s">‚ò†Ô∏è</i> <h1 class="svelte-1itho5s"> </h1> <div class="issue-selector svelte-1itho5s"><div class="issue-selector__number svelte-1itho5s"> </div> <button class="issue-selector__arrow svelte-1itho5s">‚óÄ</button> <h2 class="svelte-1itho5s"> </h2> <button class="issue-selector__arrow svelte-1itho5s">‚ñ∂</button></div> <!> <div class="explanation svelte-1itho5s"><!></div> <section class="svelte-1itho5s"><h2 class="svelte-1itho5s"> </h2> <ul class="deaths__list svelte-1itho5s"><li class="deaths__industry"><i class="svelte-1itho5s">üè≠</i> <!></li> <li class="deaths__car"><i class="svelte-1itho5s">üöó</i> <!></li> <li class="deaths__ship"><i class="svelte-1itho5s">üö¢</i> <!></li> <li class="deaths__flight"><i class="svelte-1itho5s">‚úàÔ∏è</i> <!></li> <li class="deaths__hospital"><i class="svelte-1itho5s">üè•</i> <!></li> <li class="deaths__building"><i class="svelte-1itho5s">üèóÔ∏è</i> <!></li> <li class="deaths__total svelte-1itho5s">Total: <!> ‚ò†Ô∏è</li></ul></section> <section class="svelte-1itho5s"><h2 class="svelte-1itho5s"> </h2> <ul class="solutions__list svelte-1itho5s"><!> <li class="solutions__solution svelte-1itho5s"> </li> <li class="solutions__solution svelte-1itho5s"> </li></ul></section> <footer class="svelte-1itho5s"><p class="about-numbers svelte-1itho5s"> <a href="/blog/cuantas-muertes-evitables"> </a></p></footer></section>');function zt(p,o){oe(o,!0);const[d,_]=st(),v=()=>at(ot,"$page",d),y={title:{es:"Cu√°ntas muertes evitables, debidas a...",en:"How many avoidable deaths from..."},solutions:{es:"Soluciones",en:"Solutions"},recount:{es:"Recuento",en:"Recount"},reveal:{es:"Mostrar explicaci√≥n",en:"Show explanation"},sourceDisclaimer:{es:"Estos n√∫meros han sido deliberadamente exagerados... o quiz√°s no, ¬øqui√©n sabe?",en:"These numbers have been deliberately exaggerated... or maybe not, who knows?"},sourceLink:{es:"Lee sobre este proyecto en este art√≠culo ‚Üó",en:"Read about this project in this post (in Spanish) ‚Üó"}},w={curlyBraces:{en:"Use curly braces. üêç Python? Indent properly (471 ‚ò†Ô∏è)",es:"Usa llaves. üêç ¬øPython? Cuida la indentaci√≥n (471 ‚ò†Ô∏è)"},linters:{en:"Use linters, formatters and commit hooks to force a code style",es:"Linters, formateadores y commit hooks para forzar un estilo"},tests:{en:"Properly cover code with automatic tests",es:"Cubre el c√≥digo con tests apropiadamente"},share:{en:"Share this to prevent others from screwing up",es:"Comparte esto para evitar que otras personas la caguen"},noOptionals:{en:"Avoid unnecesary optional types",es:"Evita el uso de tipos opcionales"},nullishCoalescing:{en:'Use (not abuse) Nullish Coalescing Operator "??" instead OR "||"',es:'Usa (sin abusar) Nullish Coalescing Operator "??" en vez de OR "||"'},explicitConds:{en:"Use explicit conditionals with ===",es:"Usa condicionales expl√≠citos con ==="},singleResponsibility:{en:"Single responsibility: only one data type and one simple behavior",es:"Responsabilidad √∫nica: solo un tipo de valor y un √∫nico comportamiento"},greaterOrLowerThan:{en:"Use inequality operators (<, >, <=, >=). Be careful, it's not always enough",es:"Usa desigualdades (<, >, <=, >=). Ojo, no siempre es suficiente"},threshold:{es:`Compara la diferencia absoluta con un umbral
            Ejemplo: <code>Math.abs(value - target) <= 0.001</code>`,en:`Compare the absolute difference with a threshold. 
            Example: <code>Math.abs(value - target) <= 0.001</code>`},sharedRef:{es:"No guardar referencias. Realizar copias en profundidad",en:"Do not save references. Make deep copies"},inmutable:{es:"Vuelve inmutable lo que debe ser inmutable (¬°o todo! üôÇ)",en:"Make immutable what should be immutable (or everything! üôÇ)"}},b=Je([{id:"unbraced-blocks",title:{en:"Unbraced blocks",es:"Bloques sin llaves"},explanation:{es:`Bloques como <code>if</code>, <code>while</code> y 
                <code>for</code> pueden escribirse sin llaves,
                en ese caso ejecutar√°n la siguiente sentencia. En el ejemplo,
                solo el <code>log.critical(...)</code> es afectado por el bloque if,
                mientras que <code>applyEmergencyBrakes()</code> se ejecutar√°
                siempre.`,en:`Blocks like <code>if</code>, <code>while</code>, and <code>for</code> can be written without curly
                 braces. In that case, they will execute the following statement. 
                 In the example, only <code>log.critical(...)</code> is affected by the if
                  block, while <code>applyEmergencyBrakes()</code> will always execute.`},code:`function onObstacleDetected() {
    // ... 
    if ( isUnavoidable )
        log.critical('Applying emergency brakes')
        applyEmergencyBrakes()   
    // ...
}`,solutions:["curlyBraces","linters"],deaths:{car:151,building:180,flight:74,hospital:283,industry:481,ship:17}},{id:"falsy-trap",title:{en:"Falsy traps",es:"Trampas falsy"},explanation:{es:`En muchos lenguajes, valores como 0 o "" se consideran falsy. 
                En el ejemplo, al establecer la aceleraci√≥n en 0, se aplica el 
                valor por defecto de 50 al considerarse false.`,en:`In many languages, values like 0 or "" are considered 
                falsy. In the example, setting acceleration to 0 applies 
                the default value of 50 as it's treated as false.`},code:`let targetAcceleration: number | null = 0
// ...
const currentAcceleration = targetAcceleration || 50
`,solutions:["noOptionals","singleResponsibility","explicitConds","nullishCoalescing"],deaths:{car:582,building:410,flight:320,hospital:683,industry:523,ship:53}},{id:"shared-state",title:{en:"Shared states",es:"Estados compartidos"},explanation:{es:`Otro cl√°sico. Basar el estado interno en un objeto recibido externamente 
                rompe la encapsulaci√≥n. El estado puede ser alterado desde fuera
                sin pasar por la interfaz, modificando el objeto pasado por constructor.`,en:`Another classic. Basing internal state on an externally passed object 
                breaks encapsulation. The state can be altered externally 
                by modifying what was passed to the constructor.`},code:`class Whatever {
    private anObject: AnObjectType

    constructor(initial: AnObjectType) {
        this.anObject = initial
    }
    // Interface to alter the state
}
// outside
//...
const w = new Whatever(something)
something.prop = "Hi ü•∑"`,solutions:["sharedRef","inmutable"],deaths:{car:392,building:300,flight:241,hospital:520,industry:530,ship:34}},{id:"float-comparison",title:{en:"Float comparison",es:"Comparaci√≥n de float"},explanation:{es:`Un cl√°sico. Los n√∫meros en punto flotante no deben
                compararse directamente. En el ejemplo, currentBattery podr√≠a
                valer 100.000004 y nunca dar true. Si esta comprobaci√≥n es
                necesaria para desactivar el sistema de carga... ‚ò†Ô∏è`,en:`A classic. Floating point numbers should not be compared 
                directly. In this example, currentBattery could be 100.004 
                and it would never return true. If this check is necessary 
                to disable the charging system... ‚ò†Ô∏è`},code:`function isCharged() {
    return this.currentBattery === 100.0
}`,solutions:["greaterOrLowerThan","threshold"],deaths:{car:274,building:259,flight:195,hospital:454,industry:440,ship:45}},{id:"accidental-mutability",title:{en:"Accidental mutability",es:"Mutabilidad accidental"},explanation:{es:`Podemos despistarnos y mutar objetos que deben ser inmutables.
                En el ejemplo, se olvida hacer una copia en profundidad del
                par√°metro de opciones. Adem√°s de <a href="/avoidable-deaths-by-code#shared-state">compartir el estado</a>, 
                DEFAULT_CONFIG puede ser alterado, cuando deber√≠a ser 
                inmutable en profundidad.`,en:`We can easily overlook and mutate objects that are meant 
                to be immutable. In the example, a deep copy of the options 
                parameter is missing. In addition to <a href="/avoidable-deaths-by-code#shared-state">sharing the state</a>,
                DEFAULT_CONFIG can be mutated and should be deeply 
                immutable.`},code:`const DEFAULT_CONFIG: Configuration = {
    theme: 'dark',
    // ...
}

class UIComponent {
    private config: Configuration

    constructor(config: Configuration = DEFAULT_CONFIG) {
        this.config = config
    }

    setLightTheme() { this.config.theme = 'light' }
}`,solutions:["sharedRef","inmutable"],deaths:{car:482,building:350,flight:320,hospital:153,industry:423,ship:35}}]);let i=be("en"),u=be(0),r=ye(()=>b[e(u)]),E=ye(()=>Object.values(e(r).deaths).reduce((l,h)=>l+h,0));function L(){if(v().url.hash){const l=v().url.hash.substring(1),h=Object.values(b).findIndex(x=>x.id==l);h!=-1&&f(u,h,!0)}}Ce(async()=>{L(),await re();const l=localStorage.getItem("lang");l?f(i,l==="es"?"es":"en",!0):navigator.language=="es"||navigator.language.startsWith("es-")?(f(i,"es"),localStorage.setItem("lang","es")):(f(i,"en"),localStorage.setItem("lang","en")),ne(v().url.pathname+`#${e(r).id}`,{})});function g(l){f(i,l,!0),localStorage.setItem("lang",l)}var A=xt();se("hashchange",Ke,L);var B=t(A),M=t(B);M.__click=[_t,g];let U;var q=s(M,2);q.__click=[ft,g];let R;a(B);var F=s(B,4),W=t(F,!0);a(F);var N=s(F,2),C=t(N),z=t(C);a(C);var c=s(C,2);c.__click=[gt,u,b,v,r];var n=s(c,2),T=t(n,!0);a(n);var Se=s(n,2);Se.__click=[mt,u,b,v,r],a(N);var le=s(N,2);vt(le,{language:"TypeScript",get content(){return e(r).code}});var G=s(le,2),Ee=t(G);{var Le=l=>{var h=Xe(),x=Ye(h);xe(x,()=>e(r).explanation[e(i)]),k(l,h)},Ae=l=>{var h=yt();h.__click=[bt,r];var x=t(h,!0);a(h),S(()=>m(x,y.reveal[e(i)])),k(l,h)};$(Ee,l=>{e(r).revealed?l(Le):l(Ae,!1)})}a(G);var P=s(G,2),J=t(P),Be=t(J);a(J);var ce=s(J,2),K=t(ce),Ue=s(t(K),2);j(Ue,{get targetNumber(){return e(r).deaths.industry}}),a(K);var V=s(K,2),Ne=s(t(V),2);j(Ne,{get targetNumber(){return e(r).deaths.car}}),a(V);var X=s(V,2),Me=s(t(X),2);j(Me,{get targetNumber(){return e(r).deaths.ship}}),a(X);var Y=s(X,2),qe=s(t(Y),2);j(qe,{get targetNumber(){return e(r).deaths.flight}}),a(Y);var Q=s(Y,2),Fe=s(t(Q),2);j(Fe,{get targetNumber(){return e(r).deaths.hospital}}),a(Q);var Z=s(Q,2),Re=s(t(Z),2);j(Re,{get targetNumber(){return e(r).deaths.building}}),a(Z);var de=s(Z,2),De=s(t(de));j(De,{get targetNumber(){return e(E)}}),we(),a(de),a(ce),a(P);var ee=s(P,2),te=t(ee),$e=t(te);a(te);var ue=s(te,2),he=t(ue);Qe(he,17,()=>e(r).solutions,Ze,(l,h)=>{var x=wt(),Ge=t(x);xe(Ge,()=>w[e(h)][e(i)]),we(),a(x),k(l,x)});var ae=s(he,2),He=t(ae);a(ae);var pe=s(ae,2),We=t(pe);a(pe),a(ue),a(ee);var ve=s(ee,2),me=t(ve),ge=t(me),_e=s(ge),ze=t(_e,!0);a(_e),a(me),a(ve),a(A),S((l,h)=>{U=H(M,1,"lang svelte-1itho5s",null,U,l),R=H(q,1,"lang svelte-1itho5s",null,R,h),m(W,y.title[e(i)]),m(z,`${e(u)+1} / ${b.length??""}`),et(n,"id",e(r).id),m(T,e(r).title[e(i)]),m(Be,`‚ò†Ô∏è ${y.recount[e(i)]??""}`),m($e,`‚òëÔ∏è ${y.solutions[e(i)]??""}`),m(He,`${w.tests[e(i)]??""}.`),m(We,`${w.share[e(i)]??""}.`),m(ge,`${y.sourceDisclaimer[e(i)]??""} `),m(ze,y.sourceLink[e(i)])},[()=>({"lang--selected":e(i)=="es"}),()=>({"lang--selected":e(i)=="en"})]),k(p,A),ie(),_()}tt(["click"]);export{zt as component,Wt as universal};
