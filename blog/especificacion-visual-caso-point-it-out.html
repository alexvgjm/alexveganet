<!doctype html>
<html lang="es">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" href="/favicon.png" />
		<meta name="color-scheme" content="dark" />		
		<!-- Color for browser url bar in mobile/Safari -->
		<meta name="theme-color" media="(prefers-color-scheme: dark)" content="#222222" />
		<!-- Disable Google FLOC -->
		<meta http-equiv="Permissions-Policy" content="interest-cohort=()" />
		<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1.0" />
		<meta property="og:type" content="website" />


		<script>
			// Calling this here so that it loads as quickly as possible
			// Avoiding a flash of light mode in case dark mode is used
			const theme = localStorage.getItem('theme-preference') || 'auto';
			document.firstElementChild?.setAttribute('data-theme', theme);
		</script>
		
		<link href="../_app/immutable/assets/4.ClJVwGEW.css" rel="stylesheet">
		<link href="../_app/immutable/assets/styles.BI8UiRY9.css" rel="stylesheet">
		<link href="../_app/immutable/assets/InfoBox.DvHn1tL4.css" rel="stylesheet">
		<link href="../_app/immutable/assets/Code.CKCio-tz.css" rel="stylesheet">
		<link href="../_app/immutable/assets/Image.07fnLzEs.css" rel="stylesheet">
		<link href="../_app/immutable/assets/ColumnsContainer.B6dEa0-C.css" rel="stylesheet">
		<link href="../_app/immutable/assets/utils.BEXRWt4v.css" rel="stylesheet">
		<link href="../_app/immutable/assets/18.BWf-Qbmh.css" rel="stylesheet">
		<link rel="modulepreload" href="../_app/immutable/entry/start.Dys29Zju.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/wfScolaD.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/k_-SACZf.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/BduZyM7k.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/DIeogL5L.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/CUZXlhwM.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/B6loGvSK.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/CIWVgPg3.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/D15U5vI1.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/D4COoUHs.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/Bkwfa0mc.js">
		<link rel="modulepreload" href="../_app/immutable/entry/app.DZhwLGq6.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/Dp1pzeXC.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/CWj6FrbW.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/BqxltznQ.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/kPmmzQJp.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/DzBwx_jc.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/Km-0Pu8Z.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/Cpacy8W0.js">
		<link rel="modulepreload" href="../_app/immutable/nodes/0.CgfhGROC.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/BTGqeDDF.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/CqkleIqs.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/C-pAAiiO.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/BQ15y-oL.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/CgVzVCqa.js">
		<link rel="modulepreload" href="../_app/immutable/nodes/4.CL00ZXRP.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/BSOZMg1Q.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/CJDWlBBp.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/Wkx9sMwb.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/C0NDRyn_.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/69_IOA4Y.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/611aVr9j.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/CUg5QR1x.js">
		<link rel="modulepreload" href="../_app/immutable/nodes/6.LhtG8EnN.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/DIabmNBn.js">
		<link rel="modulepreload" href="../_app/immutable/nodes/18.CWU06UoW.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/Dg0HV3ef.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/CNfEwzh9.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/DlsCqhfG.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/Dav-uZcp.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/NVWwRTYa.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/RmmjoSf4.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/0WgYKyNH.js"><!--[--><!--[--><!--]--> <!--[--><meta name="robots" content="index,follow"/><!--]--> <!--[--><meta name="description" content="Caso de un proyecto en activo para el que repaso el concepto de regresi√≥n visual y especificaci√≥n visual. Contenido denso."/><!--]--> <!--[--><link rel="canonical" href="https://alexvega.net/blog/especificacion-visual-caso-point-it-out"/><!--]--> <!--[--><meta name="keywords" content="svg, regresi√≥n visual, visual testing"/><!--]--> <!--[!--><!--]--> <!--[!--><!--]--> <!--[--><!--[--><meta name="twitter:card" content="summary"/><!--]--> <!--[!--><!--]--> <!--[--><meta name="twitter:title" content="Especificaci√≥n visual. Caso Point it out!"/><!--]--> <!--[--><meta name="twitter:description" content="Caso de un proyecto en activo para el que repaso el concepto de regresi√≥n visual y especificaci√≥n visual. Contenido denso."/><!--]--> <!--[!--><!--]--> <!--[!--><!--]--> <!--[--><meta name="twitter:image" content="https://alexvega.net/_app/immutable/assets/pio-round-fail-test.-sGo8TTQ.png"/><!--]--> <!--[!--><!--]--> <!--[!--><!--]--> <!--[!--><!--]--> <!--[!--><!--]--> <!--[!--><!--]--> <!--[!--><!--]--> <!--[!--><!--]--> <!--[!--><!--]--> <!--[!--><!--]--> <!--[!--><!--]--> <!--[!--><!--]--> <!--[!--><!--]--> <!--[!--><!--]--> <!--[!--><!--]--><!--]--> <!--[!--><!--]--> <!--[--><!--[--><meta property="og:url" content="https://alexvega.net/blog/especificacion-visual-caso-point-it-out"/><!--]--> <!--[!--><!--]--> <!--[--><meta property="og:title" content="Especificaci√≥n visual. Caso Point it out!"/><!--]--> <!--[--><meta property="og:description" content="Caso de un proyecto en activo para el que repaso el concepto de regresi√≥n visual y especificaci√≥n visual. Contenido denso."/><!--]--> <!--[--><!--[--><meta property="og:image" content="https://alexvega.net/_app/immutable/assets/pio-round-fail-test.-sGo8TTQ.png"/> <!--[--><meta property="og:image:alt" content="Alex Vega site logo"/><!--]--> <!--[--><meta property="og:image:width" content="1280"/><!--]--> <!--[--><meta property="og:image:height" content="720"/><!--]--> <!--[!--><!--]--> <!--[!--><!--]--><!--]--><!--]--> <!--[!--><!--]--> <!--[!--><!--]--> <!--[!--><!--]--> <!--[!--><!--]--><!--]--> <!--[!--><!--]--> <!--[!--><!--]--><!--]--><!--[--><link rel="stylesheet" href="/blog.css"/><!--]--><title>Especificaci√≥n visual. Caso Point it out!</title>
	</head>
	<body data-sveltekit-preload-data="hover" class="loading">
		<div class="hydration-protection-wrapper__dont-remove" 
			 style="display: contents"><!--[--><!--[--><!----><!--[--><!----><!----> <!--[--><div class="nav-fade-overlay svelte-oabbd1"></div> <nav class="main-nav svelte-oabbd1"><a class="main-nav__link svelte-oabbd1" tabindex="-1" href="/">Inicio</a> <a class="main-nav__link svelte-oabbd1" tabindex="-1" href="/#contacto">Contacto</a> <a class="main-nav__link svelte-oabbd1" tabindex="-1" href="/blog">Blog</a> <button class="main-nav__button svelte-oabbd1" tabindex="1" aria-busy="true" title="Desplegar men√∫ de navegaci√≥n" aria-label="Desplegar men√∫ de navegaci√≥n"></button></nav><!--]--> <!--[--><div class="loader svelte-14xshfi"><div class="loader__spinner svelte-14xshfi"></div></div><!--]--> <main class="svelte-1pvwjww main--loading"><!--[--><!----><!----><!----><!--[--><div class="cover svelte-s7hptc cover--top"><!--[!--><!--]--> <!--[!--><picture><!--[--><source srcset="/_app/immutable/assets/pio-round-fail-test.DX0Cn6lJ.avif 1x, /_app/immutable/assets/pio-round-fail-test.CmaCatt2.avif 2x" type="image/avif"/><source srcset="/_app/immutable/assets/pio-round-fail-test.Dw2-sPvT.webp 1x, /_app/immutable/assets/pio-round-fail-test.DFm94EAo.webp 2x" type="image/webp"/><source srcset="/_app/immutable/assets/pio-round-fail-test.BPuwgNjn.png 1x, /_app/immutable/assets/pio-round-fail-test.-sGo8TTQ.png 2x" type="image/png"/><!--]--> <img src="/_app/immutable/assets/pio-round-fail-test.-sGo8TTQ.png" alt="Portada del post" class="cover__img svelte-s7hptc" width="1280" height="720"/></picture><!--]--></div><!--]--> <article class="post svelte-1js559p" style="margin-top: 0px"><header class="post__header svelte-1js559p"><h1 class="post__title svelte-1js559p">Especificaci√≥n visual. Caso Point it out!</h1> <div class="post__meta-row svelte-1js559p"><!--[--><div class="post__date svelte-1js559p">25 de julio de 2024</div><!--]--> <!--[--><div class="post__tags svelte-1js559p"><!--[--><a class="tag svelte-rpb2ex" href="/tag/testing-tdd-bdd-atdd">Testing/TDD/BDD/ATDD</a><a class="tag svelte-rpb2ex" href="/tag/tooling">Tooling</a><a class="tag svelte-rpb2ex" href="/tag/dx">DX</a><!--]--></div><!--]--></div></header> <!----><p>He tenido la necesidad de crear formas posicionables sobre sitios web,
se√±alando o conectando elementos. Muchas veces. Es un must en aplicaciones
interactivas que requieren de alg√∫n tipo de se√±alizaci√≥n, como podr√≠a ocurrir
en tutoriales.</p> <p>Harto de reinventar la rueda decido buscar una biblioteca sencillita que me
resuelva este problema. Esperaba encontrar muchas para ello, o quiz√°s
como alguna feature de alguna muy gorda y conocida.
Estaba casi convencido de que existir√≠a algo, pero que a√∫n as√≠ quiz√°s tendr√≠a que
hacer yo mismo una biblioteca propia con <strong>filosof√≠a minimalista</strong>.</p> <p>Pero lo cierto es que, al menos en unas pocas b√∫squedas sencillas, no he
encontrado nada. Que no sea f√°cil de encontrar no significa que no exista,
no te imaginas cu√°ntas superherramientas sin visibilidad he encontrado entre
repositorios perdidos.</p> <p>A falta de soluciones (o como resultado de una mala investigaci√≥n), me pongo
manos a la obra en el desarrollo de una biblioteca para ello (Point it out) y
me doy cuenta de que necesito algo para especificar qu√© resultado visual busco.
Necesito alguna t√©cnica de <strong>especificaci√≥n visual</strong>, si es que existe algo
as√≠ y si significa lo que pretendo que signifique.</p> <h2>Describiendo el problema: c√≥mo se√±alizar elementos</h2> <p>Por ejemplo, ¬øqu√© podr√≠a hacer si quisiera
se√±alizar <span class="no-wrap svelte-49cqox"><!----><span id="example-target" class="hl">estas palabras</span><!----></span><!---->?
Si todo funciona bien deber√≠as estar viendo un rect√°ngulo verde sobre las palabras indicadas.</p> <p>‚ÄúPero Alexander, ¬øme est√°s diciendo que ya existe entonces soluci√≥n?‚Äù No, lo que
est√°s viendo es fruto del resultado final (o al menos de lo que ya tengo
desarrollado). Dado que ya tengo una medio soluci√≥n, ¬øpor qu√© no mostrarlo?</p> <div class="info-box svelte-um5er8"><!--[!--><!--]--> <!----><p>AVISO: ¬øEst√°s buscando un tutorial paso a paso de c√≥mo
desarrollar una biblioteca de manera profesional? Pues este NO es el lugar.
Solo encontrar√°s fragmentos de c√≥digo relevantes para plantear el temita
de la especificaci√≥n visual.</p><!----></div><!----> <p>En una primera versi√≥n, la biblioteca deb√≠a aportar al menos un primer mecanismo simple de
se√±alizaci√≥n. Para ello especifiqu√© la siguiente funci√≥n:</p> <div class="code-wrapper svelte-122pskk" style="--lang-color: #3178c6"><!--[--><div class="code-wrapper__lang svelte-122pskk">TypeScript</div><!--]--> <div class="code-wrapper__buttons svelte-122pskk"><!--[!--><!--]--> <!--[!--><!--]--></div> <pre class="svelte-122pskk"><code class="language-typescript svelte-122pskk"><!----><!---->create(shape: ShapeName, {target: string | HTMLElement})<!----></code></pre></div><!----> <p><code>ShapeName</code> se trata de una string, un tipo de uni√≥n ‚Äòrect‚Äô | ‚Äòimage‚Äô, aunque
en un primer momento solo existe ‚Äòrect‚Äô. La opci√≥n target es un selector CSS
o una referencia directa al elemento objetivo.</p> <ul><li>Si es un selector, trabajar√° con el primer elemento que encuentre con ese selector, o lanzar√° excepci√≥n si no encuentra nada.</li> <li>Crear√° un elemento SVG que a√±adir√° como hijo al body.</li> <li>Dicho SVG debe estar posicionado absolutamente sobre el elemento a se√±alar.</li> <li>Dicho SVG debe tener un tama√±o similar al elemento a se√±alar. <ul><li>Digo similar porque podr√≠a ser m√°s grande, si quiere rodearse sin taparlo.</li></ul></li></ul> <p>En las primeras iteraciones de herramientas gr√°ficas me gusta centrarme en la exploraci√≥n tecnol√≥gica. Hacer un caso m√≠nimo funcional que d√© un resultado visual inmediato.</p> <h3>Especificaciones formales con alg√∫n framework de testing</h3> <p>Aqu√≠ empieza lo realmente interesante. Hay que testar visualmente, eso est√°
claro, estamos ante una librer√≠a cuyo objetivo es renderizar cosas. Pero eso no
significa que inmediatamente todo vaya a ser regresi√≥n visual y E2E.
Considera la siguiente spec:</p> <div class="code-wrapper svelte-122pskk" style="--lang-color: #3178c6"><!--[--><div class="code-wrapper__lang svelte-122pskk">TypeScript</div><!--]--> <div class="code-wrapper__buttons svelte-122pskk"><!--[!--><!--]--> <!--[!--><!--]--></div> <pre class="svelte-122pskk"><code class="language-typescript svelte-122pskk"><!----><!---->describe('create(...)', ()=>{
    ...
    it('creates an SVG and appends it to the body', ()=>{
        ...
    })
})<!----></code></pre></div><!----> <p>Esto no requiere renderizado. Vale con un DOM virtual, comprobar que se crea
un nuevo nodo y si queda colgando del body. Hacer una prueba E2E para esto es
matar moscas a ca√±onazos.</p> <h2>Especificaci√≥n visual</h2> <p>Me gusta la <em>regresi√≥n visual</em>, pero tiene un peque√±o problema. Por si no sabes
de qu√© te estoy hablando, consiste en la generaci√≥n y comparaci√≥n mediante
snapshots <em>(ficheros que describan el estado de una aplicaci√≥n ante
ciertas condiciones. T√≠picamente suelen ser screenshots)</em>. Su fortaleza
reside en la cobertura futura. Por lo general se
generan snapshots una vez se tiene el resultado buscado para que en futuras
comparaciones tras refactoring recibamos un feedback de si algo ha cambiado m√°s
de lo esperado.</p> <p>Y aunque es una herramienta √∫til y bienvenida en mantenimiento de aplicaciones
que controlan muy bien la interfaz de usuario y donde es cr√≠tico que estas no
cambien inesperadamente, la regresi√≥n visual no forma exactamente parte del
flujo de las metodolog√≠as estilo TDD, BDD o ATDD. Recordemos que son
metodolog√≠as de dise√±o y <strong>la regresi√≥n visual no aporta nada en la fase de dise√±o o para definir especificaciones preimplementaci√≥n.</strong></p> <h3>Buscando la alternativa a la regresi√≥n visual</h3> <p>La siguiente forma de proceder y opiniones son, hasta donde s√©, de <span class="no-wrap svelte-49cqox"><!----><!---->Cosexa Pgropia‚Ñ¢<!----></span><!---->. No he hecho una investigaci√≥n exhaustiva ni
s√© si hay autores que han escrito sobre esto a favor o en contra. Por eso no
asumas nada de lo que expongo aqu√≠, evita todo prejuicio positivo y afila la
sospecha y la duda.</p> <p>El proceso que he realizado es el siguiente: adaptar una biblioteca o framework
con capacidades para regresi√≥n visual (en este caso Playwright) para que
en su lugar genere screenshots de dos p√°ginas distintas y
las compare. Una de las p√°ginas presenta el escenario donde ejecutas la acci√≥n
a probar; la otra es la versi√≥n con el resultado final esperado, hecha a mano
y centr√°ndonos solo en el resultado visual.</p> <p>Supongamos la siguiente especificacion:</p> <div class="code-wrapper svelte-122pskk" style="--lang-color: #3178c6"><!--[--><div class="code-wrapper__lang svelte-122pskk">TypeScript</div><!--]--> <div class="code-wrapper__buttons svelte-122pskk"><!--[!--><!--]--> <!--[!--><!--]--></div> <pre class="svelte-122pskk"><code class="language-typescript svelte-122pskk"><!----><!---->describe("create('rect', {...})", ()=> {
    ...
    describe('Default behaviors (no options)', () => {
        ...
        it('creates an orange rect of 4px width around target', ()=>{
            ...
        })
    })
})<!----></code></pre></div><!----> <p>Nuestro escenario de pruebas podr√≠a contener, entre otras cosas, lo siguiente:</p> <div class="columns-container svelte-1dlijvy" style="--gap: 4px"><div class="columns-container__left svelte-1dlijvy" style="width: 50%"><!----><div class="code-wrapper svelte-122pskk" style="--lang-color: #e34c26"><!--[--><div class="code-wrapper__lang svelte-122pskk">HTML</div><!--]--> <div class="code-wrapper__buttons svelte-122pskk"><!--[!--><!--]--> <!--[!--><!--]--></div> <pre class="svelte-122pskk"><code class="language-html svelte-122pskk"><!----><!---->&lt;div class="test-box">&lt;/div><!----></code></pre></div><!----></div> <div class="columns-container__right svelte-1dlijvy" style="width: 50%"><!----><div class="code-wrapper svelte-122pskk" style="--lang-color: #2965f1"><!--[--><div class="code-wrapper__lang svelte-122pskk">CSS</div><!--]--> <div class="code-wrapper__buttons svelte-122pskk"><!--[!--><!--]--> <!--[!--><!--]--></div> <pre class="svelte-122pskk"><code class="language-css svelte-122pskk"><!----><!---->.test-box {
    background: #333;
    width: 250px;
    height: 150px;
}<!----></code></pre></div><!----></div></div><!----> <div class="example svelte-1e8u39k"><div class="test-box svelte-1e8u39k" style="width: 250px; height: 150px"></div></div><!----> <p>Y por otra parte, una p√°gina copia modificada con el resultado VISUAL esperado</p> <div class="columns-container svelte-1dlijvy" style="--gap: 4px"><div class="columns-container__left svelte-1dlijvy" style="width: 50%"><!----><div class="code-wrapper svelte-122pskk" style="--lang-color: #e34c26"><!--[--><div class="code-wrapper__lang svelte-122pskk">HTML</div><!--]--> <div class="code-wrapper__buttons svelte-122pskk"><!--[!--><!--]--> <!--[!--><!--]--></div> <pre class="svelte-122pskk"><code class="language-html svelte-122pskk"><!----><!---->&lt;div class="test-box test-box--expected">&lt;/div><!----></code></pre></div><!----></div> <div class="columns-container__right svelte-1dlijvy" style="width: 50%"><!----><div class="code-wrapper svelte-122pskk" style="--lang-color: #2965f1"><!--[--><div class="code-wrapper__lang svelte-122pskk">CSS</div><!--]--> <div class="code-wrapper__buttons svelte-122pskk"><!--[!--><!--]--> <!--[!--><!--]--></div> <pre class="svelte-122pskk"><code class="language-css svelte-122pskk"><!----><!---->...
.test-box--expected {
    box-sizing: content-box;
    border: 4px solid orange;
}
<!----></code></pre></div><!----></div></div><!----> <div class="example svelte-1e8u39k"><div class="test-box svelte-1e8u39k test-box--expected" style="width: 250px; height: 150px"></div></div><!----> <p>S√â LO QUE EST√ÅS PENSANDO (o deber√≠as): ‚Äúpero Alexander, en el esperado no hay
ning√∫n SVG, ¬°solo le has puesto un borde naranja de 4 p√≠xeles al elemento!‚Äù</p> <p>A esto es a lo que me refiero con especificaci√≥n visual. Podr√≠a haber un SVG
hecho a mano (de hecho los hay en specs m√°s complejas) y seguir√≠a siendo v√°lido,
pero en realidad no importa la estructura,
no es lo que estamos especificando ni testando aqu√≠.</p> <p>Al igual que con tests convencionales, buscamos la forma menos compleja y m√°s
directa de definir lo que queremos (en este caso lo que queremos visualmente).</p> <p>Cr√©eme, esto no lo hago por mejorar la adaptabilidad y reducir la fragilidad del
test, aunque sean sus efectos positivos principales, sino porque simplemente es la
forma m√°s sencilla que se me ha ocurrido de conseguir lo que se busca visualmente.</p> <p>En una cl√°sica ‚Äúespecificaci√≥n por ejemplo‚Äù con GIVEN-WHEN-THEN, esta parte
corresponder√≠a al THEN, y al igual que en las especificaciones convencionales,
debe expresarse de la forma m√°s directa y clara atendiendo en este caso
exclusivamente al resultado visible (ya que es la √∫nica responsabilidad en
estos tests).</p> <p>Veamos un test similar al del Mundo Real‚Ñ¢. El original y funcional lo tienes
en el repositorio (enlace al final). Es un test parametrizado, se genera con variaciones de
expectedWidth (xW) y expectedHeight (xH).</p> <div class="code-wrapper svelte-122pskk" style="--lang-color: #3178c6"><!--[--><div class="code-wrapper__lang svelte-122pskk">TypeScript</div><!--]--> <div class="code-wrapper__buttons svelte-122pskk"><!--[!--><!--]--> <!--[!--><!--]--></div> <pre class="svelte-122pskk"><code class="language-typescript svelte-122pskk"><!----><!---->it(`creates an orange rect of 4px width around target (${xW}x${xH})`, async ({ page }) => {
    await comparePages({
        testingURL: `/${xW}x${xH}`,
        expectedURL: `/expected/rect/${xW}x${xH}-default`,
        action: () => {
            return page.evaluate(() => {
                pio.create('rect', {target: `.test-box--${xW}x${xH}`})
            })
        }
    })
})<!----></code></pre></div><!----> <small>NOTA: que veas tanta especificidad como
orange o 4px, algo que no suele ser recomendado en specs/tests, es normal en este caso porque
estamos especificando los valores default, es de las pocas excepciones a la regla.</small> <p>La funci√≥n es autoexplicativa. Recibe la p√°gina donde se ejecutar√° la acci√≥n
a testar, la p√°gina con la que comparar, y la acci√≥n a realizar. Tras lanzar el
test deber√≠a fallar al no tener implementaci√≥n inicialmente.
El test report de Playwright en este caso me reporta una comparaci√≥n de
m√∫ltiples formas, entre ellas una muy chula con un slider. Captura:</p> <!--[!--><div class="image-wrapper svelte-1urev20"><a href="/_app/immutable/assets/captura-error.DS5ipSG-.png" target="_blank"><img src="/_app/immutable/assets/captura-error.DS5ipSG-.png" alt="Test report de Playwright mostrando resultado actual y esperado con slider" class="svelte-1urev20"/></a></div><!--]--><!----> <div class="info-box svelte-um5er8"><!--[!--><!--]--> <!----><!---->Lamentablemente Playwright no tiene una funci√≥n tan m√°gica y bonita como
comparePages. Es propia, resultado de un poco de 
hacking con los mecanismos de regresi√≥n visual de Playwright, pero tienes total
libertad para meterle un copia y pega (hazlo del repo, que es la que funciona).<!----></div><!----> <h4>S√≥lo lo visible</h4> <p>Tengo que insistir en que s√≥lo hago esto con fines de testar el resultado
visual. Puede que te preguntes algo como ‚Äú¬øNo est√°s perdiendo la oportunidad
de especificar directamente un resultado final que sirva tambi√©n de
especificaci√≥n del DOM deseado para una prueba E2E completa?‚Äù</p> <p>No conozco (todav√≠a) el DOM deseado y no puedo <em>perder tiempo</em> planificando.
Esto me permite especificar el
resultado visual, que es lo √∫nico que tengo claro ahora mismo. Adem√°s los SVG
para un mismo objetivo se pueden generar de m√∫ltiples maneras. Exagerar el
detalle aumenta la rigidez del dise√±o, no permite posponer decisiones y aumenta
la fragilidad de los tests.</p> <p>Por otra parte tambi√©n nos limitar√≠a m√°s con escenarios menos deterministas.
Imagina que quieres que el recuadro
siga al elemento si este se reposiciona (t√≠pico al reescalar pantalla).
Esto es algo que debe hacer la biblioteca, ¬øc√≥mo especificar√≠amos algo as√≠?
Implicar√≠a l√≥gica en el propio test. En los expects
se evitan l√≥gicas complejas a favor de resultados directos deterministas.
Un borde por CSS no solo est√° fijado a un elemento, tambi√©n funciona aunque
reescales o lo muevas.</p> <h3>Otras preguntas relacionadas que me he planteado</h3> <p>¬øPor qu√© hacer un esfuerzo en especificar partes del aspecto visual esperado
en un desarrollo si muy probablemente haya partes que no
podremos especificar de todas formas?, ¬øno es como intentar construir una casa
en la que sabemos de antemano que nunca tendremos techo o alguna otra parte
fundamental?</p> <p>Ya tenemos la respuesta en la jerarqu√≠a de tests. Sabemos que las pruebas
unitarias no nos sirven para todo, ni tampoco las de integraci√≥n. Pero lo
hacemos igualmente porque nos gu√≠an y cubren el desarrollo, cada una a su
manera, con pros y contras. T√©cnicamente podr√≠amos usar solo tests de aceptaci√≥n
si estos fueran infinitamente r√°pidos, y a√∫n as√≠, muy probablemente se seguir√≠an
realizando pruebas unitarias y de integraci√≥n junto a ellos.</p> <p>Puedes tener un muy buen maquetador, dise√±ador, artista o artista t√©cnico en tu
equipo durante el desarrollo de una aplicaci√≥n, con capacidad para
dise√±ar/especificar r√°pidamente el resultado que quieres pero sin competencias o tiempo
para realizar la herramienta que produzca ese resultado.</p> <p>He conocido empresas que trabajan con un flujo basado en
prototipos, y eso est√° perfecto, pero podr√≠a ser muy √∫til entender esos
prototipos como especificaciones y realizar pruebas directas contra ellos.</p> <h3>¬øC√≥mo de √∫til es esto realmente?</h3> <p>La respuesta es algo evidente: si fuera muy √∫til habr√≠a
literatura al respecto y alguna que otra herramienta conocida. Cr√©eme, no soy
ning√∫n genio extendiendo el estado del arte. Esta ‚Äút√©cnica‚Äù
viene de perlas para el desarrollo de esta biblioteca en concreto, pero, ¬øse
te ocurre alguna otra? No es especialmente extrapolable. Ni siquiera es
suficiente para todos los casos de esta biblioteca.</p> <p>Voy a describirte un caso dif√≠cil de explicar: imagina que quieres
se√±alizar con una flecha que apunta siempre a un objetivo.
Sup√≥n que incluso aunque este se mueva en pantalla la flecha mantenga su
posici√≥n y gire apuntando siempre al objetivo (un ‚Äúlook at‚Äù en gr√°ficos).</p> <p>La descripci√≥n anterior es incluso dif√≠cil de imaginar para algunos, supone
problemas en c√≥mo especificarla y c√≥mo testarla. Y ni siquiera es algo realmente
complejo. En las artes visuales muchas
veces no queda m√°s remedio que romper el orden rojo-verde porque el esfuerzo de
especificar puede ser indistinguible del de implementar.</p> <p>Es ah√≠ donde destaca la regresi√≥n visual cl√°sica. Implementas y cuando est√©s
satisfecho, snapshot que servir√° como ‚Äúexpected‚Äù. No te habr√° servido para
guiar tu dise√±o e implementaci√≥n, pero seguir√°s protegiendo tu c√≥digo y
permitiendo el refactoring.</p> <p>Pero no olvides que al final eres t√∫ (o tu equipo) quien decide si cualquier
t√©cnica es o no rentable de aplicar en el flujo de trabajo. Incluso aunque
existiera garant√≠a de que aplicarlo mejorase la productividad o calidad,
podr√≠a causar el efecto contrario si diezma la moral al percibirse como
algo pesado, raro o molesto por mera falta de costumbre. La misma historia
del TDD.</p> <h2>Point it out como posible ejemplo de especificaci√≥n visual</h2> <p>Puedes seguir el desarrollo de <a href="https://github.com/alexvgjm/point-it-out" rel="nofollow">Point it out! en github</a>,
donde ver√°s que hay mucho de lo hablado en este art√≠culo llevado a un
nivel enfermizo. Es un proyecto pensado para experimentar y debatir
acerca de las posibilidades de la especificaci√≥n visual.</p> <p>Si clonas y ejecutas el proyecto en modo de desarrollo podr√°s encontrar una
jerarqu√≠a de especificaciones bastante intensa para al menos dos formas y
dos tama√±os de objetivos.
Aqu√≠ una screenshot:</p> <!--[!--><div class="image-wrapper svelte-1urev20"><a href="/_app/immutable/assets/visual-specs-index.DUyx9Wot.png" target="_blank"><img src="/_app/immutable/assets/visual-specs-index.DUyx9Wot.png" alt="" class="svelte-1urev20"/></a></div><!--]--><!----><!----></article><!----><!----><!----><!--]--><!----></main> <footer class="svelte-1pvwjww">Alexander Vega ¬© 2026</footer><!----><!--]--><!----><!----><!--]--> <!--[!--><!--]--><!--]-->
			
			<script>
				{
					__sveltekit_hm0bcj = {
						base: new URL("..", location).pathname.slice(0, -1)
					};

					const element = document.currentScript.parentElement;

					Promise.all([
						import("../_app/immutable/entry/start.Dys29Zju.js"),
						import("../_app/immutable/entry/app.DZhwLGq6.js")
					]).then(([kit, app]) => {
						kit.start(app, element, {
							node_ids: [0, 4, 6, 18],
							data: [null,null,{type:"data",data:{post:{title:"Especificaci√≥n visual. Caso Point it out!",slug:"especificacion-visual-caso-point-it-out",coverImage:"pio-round-fail-test.png",coverAuthor:"",excerpt:"Caso de un proyecto en activo para el que repaso el concepto de regresi√≥n visual y especificaci√≥n visual. Contenido denso.",date:"2024-07-25T15:06:23.177Z",updated:"2024-07-25T15:06:23.903Z",hidden:false,tags:["Testing/TDD/BDD/ATDD","Tooling","DX"],keywords:["svg","regresi√≥n visual","visual testing"],type:"default",coverPosition:"top",path:"/src/posts/especificacion-visual-caso-point-it-out.md",html:void 0,relatedPosts:[{title:"Deja de esperar por otros",slug:"deja-esperar-otros",coverImage:"jon-tyson.jpg",coverPosition:"normal",coverAuthor:"Jon Tyson",excerpt:"Hacerte tus propias herramientas puede acelerar tu trabajo, explico por qu√©.",date:"2024-09-13T13:00:23.177Z",updated:"2024-09-13T13:00:23.903Z",hidden:false,tags:["Tooling","Three.js","DX"],keywords:["herramientas","esperar","Three"],type:"default",fullReload:false,path:"/src/posts/deja-esperar-otros.md",html:void 0},{title:"Arneses para testeo de componentes de UI",slug:"arneses-testing-componentes",excerpt:"Ventajas de los arneses en testing de componentes compuestos.",date:"2026-01-16T01:26:23.177Z",updated:"2026-01-16T01:26:23.903Z",tags:["Testing/TDD/BDD/ATDD","UI/UX","Component design"],keywords:["arneses","harness","testing"],type:"default",coverImage:void 0,path:"/src/posts/arneses-testing-componentes.md",html:void 0},{title:"üî¥ Caso de la suite Cosby",slug:"caso-suite-cosby",coverImage:"blizzard.jpg",coverPosition:"normal",coverAuthor:"Annie Nyle",excerpt:"Repaso algunas experiencias con este caso, implicados, nuestra postura y resultados.",date:"2024-10-06T13:00:23.177Z",updated:"2024-10-06T13:00:23.903Z",hidden:false,tags:["Personal","Tooling"],keywords:["Blizzard"],type:"default",fullReload:false,path:"/src/posts/caso-suite-cosby.md",html:void 0}],month:"07",day:"25"}},uses:{params:["slug"]}},{type:"data",data:{post:{title:"Especificaci√≥n visual. Caso Point it out!",slug:"especificacion-visual-caso-point-it-out",coverImage:"pio-round-fail-test.png",coverAuthor:"",excerpt:"Caso de un proyecto en activo para el que repaso el concepto de regresi√≥n visual y especificaci√≥n visual. Contenido denso.",date:"2024-07-25T15:06:23.177Z",updated:"2024-07-25T15:06:23.903Z",hidden:false,tags:["Testing/TDD/BDD/ATDD","Tooling","DX"],keywords:["svg","regresi√≥n visual","visual testing"],type:"default",coverPosition:"top",path:"/src/posts/especificacion-visual-caso-point-it-out.md",html:void 0,relatedPosts:[{title:"Deja de esperar por otros",slug:"deja-esperar-otros",coverImage:"jon-tyson.jpg",coverPosition:"normal",coverAuthor:"Jon Tyson",excerpt:"Hacerte tus propias herramientas puede acelerar tu trabajo, explico por qu√©.",date:"2024-09-13T13:00:23.177Z",updated:"2024-09-13T13:00:23.903Z",hidden:false,tags:["Tooling","Three.js","DX"],keywords:["herramientas","esperar","Three"],type:"default",fullReload:false,path:"/src/posts/deja-esperar-otros.md",html:void 0},{title:"Arneses para testeo de componentes de UI",slug:"arneses-testing-componentes",excerpt:"Ventajas de los arneses en testing de componentes compuestos.",date:"2026-01-16T01:26:23.177Z",updated:"2026-01-16T01:26:23.903Z",tags:["Testing/TDD/BDD/ATDD","UI/UX","Component design"],keywords:["arneses","harness","testing"],type:"default",coverImage:void 0,path:"/src/posts/arneses-testing-componentes.md",html:void 0},{title:"üî¥ Caso de la suite Cosby",slug:"caso-suite-cosby",coverImage:"blizzard.jpg",coverPosition:"normal",coverAuthor:"Annie Nyle",excerpt:"Repaso algunas experiencias con este caso, implicados, nuestra postura y resultados.",date:"2024-10-06T13:00:23.177Z",updated:"2024-10-06T13:00:23.903Z",hidden:false,tags:["Personal","Tooling"],keywords:["Blizzard"],type:"default",fullReload:false,path:"/src/posts/caso-suite-cosby.md",html:void 0}],month:"07",day:"25"}},uses:{params:["slug"]}}],
							form: null,
							error: null
						});
					});
				}
			</script>
		</div>
	</body>
</html>
